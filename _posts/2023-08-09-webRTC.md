---
title: webRTC
categories: [学习笔记]
comments: true
---

## 应用场景

适用于各种实时通信场景

1. 点对点通讯：WebRTC 支持浏览器之间进行音视频通话，例如语音通话、视频通话等；

2. 电话会议：WebRTC 可以支持多人音视频会议，例如腾讯会议、钉钉会议等；

3. 屏幕共享：不仅可以传输音视频流，还可以用于实时共享屏幕；

4. 直播：WebRTC 可以用于构建实时直播，用户可以通过浏览器观看直播内容。

## 组成部分

三部分组成：浏览器 API、音视频引擎和网络 IO

- WebRTC API： getUserMedia、 RTCPeerConnection、 RTCDataChannel

- 音视频引擎：

音频： G711/OPUS 编解码、回音消除、降噪

视频： H264/VP8 编解码、图像增强、Jitter Buffer

- 网络 I/O： RTP/SRTP/RTCP、 P2P（STUN + TURN + ICE）

#### 浏览器 API

用于采集摄像头和麦克风生成媒体流，并处理音视频通信相关的编码、解码、传输过程，可以使用以下 API 在浏览器中创建实时通信应用程序

- getUserMedia: 获取麦克风和摄像头的许可，使得 WebRTC 可以拿到本地媒体流；

- RTCPeerConnection: 建立点对点连接的光剑，提供了创建、保持、监控、关闭连接的方法和实现。像媒体协商、收集候选地址都需要它来完成；

- RTCDataChannel: 支持点对点数据传输，可用于传输文件、文本消息等。

#### 音视频引擎

有了 WebRTC，可以很方便实现音视频通信；若没有的情况下，就需要去了解音视频编码器相关技术。

WebRTC 内置了强大的音视频引擎，可以对媒体流进行编解码、回声消除、降噪、防止视频抖动等处理。只要使用的音视频编解码器有

1. OPUS: 一个开源的低延迟音频编解码器，WebRTC 默认使用；

2. G711: 国际电信联盟 ITU-T 定制出来的一套语音压缩标准，是主流的波形声音编解码器；

3. VP8: VP8，VP9，都是 Google 开源的视频编解码器，现在主要用于 WebRTC 视频编码；

4. H264: 视频编码领域的通用标准，提供了高效的视频压缩编码，之前 WebRTC 最先支持的是自己家的 VP8，后面也支持了 H264、H265 等。
